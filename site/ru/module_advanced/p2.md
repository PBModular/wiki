# üíΩ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ë–î

**–í –±–æ—Ç–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ORM SQLAlchemy –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ.** [**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**](https://docs.sqlalchemy.org/en/20/)

–ü—Ä–µ–∂–¥–µ —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `use_db` –∏–ª–∏ `require_db` –≤ —Ñ–∞–π–ª `info.yaml`!

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ë–î –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –æ–±—ä—è–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π SQLAlchemy, –∞ –ø–æ–∑–∂–µ —É–∫–∞–∑–∞—Ç—å –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ property-–º–µ—Ç–æ–¥–µ `db_meta`:

```python
# db.py
from sqlalchemy.orm import Mapped, mapped_column, DeclarativeBase

class Base(DeclarativeBase):
    pass
...

# main.py
from .db import Base
...
# Override db_meta method
@property
def db_meta(self):
    return Base.metadata
```

–ü–æ—Å–ª–µ —á–µ–≥–æ, –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î, –≤ –∞—Ç—Ä–∏–±—É—Ç–µ `db` –æ–±—ä–µ–∫—Ç–∞ –º–æ–¥—É–ª—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `Database`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∞—Ç—Ä–∏–±—É—Ç—ã

- `engine` - –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `AsyncEngine` (SQLAlchemy)
- `session_maker` - –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `async_sessionmaker` (SQLAlchemy)

::: info
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤–æ—è –ë–î. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite, –æ–¥–Ω–∞–∫–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –±–æ—Ç–∞ (–ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –ø–æ–ª–Ω–æ–π –º–µ—Ä–µ)
:::

–î–∞–ª–µ–µ –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ, –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ SQLAlchemy, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—ä–µ–∫—Ç—ã `engine` –∏ `session_maker`. –ü—Ä–∏–º–µ—Ä:

```python
async with self.db.session_maker() as session:
    result = await session.scalar(select(User))
```
